{% extends "base.html" %}

{% block title %}–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è - VibeMe{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8">
        <div class="card card-custom">
            <div class="card-body">
                <h2 class="mb-4">üåà –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{ current_user.username }}!</h2>
                <p class="lead">–ö–∞–∫ —Ç—ã —Å–µ–±—è —á—É–≤—Å—Ç–≤—É–µ—à—å —Å–µ–≥–æ–¥–Ω—è?</p>
                
                <div class="d-grid gap-2 d-md-flex justify-content-md-start mb-4">
                    <a href="{{ url_for('main.mood_form') }}" class="btn btn-custom btn-lg">
                        üìù –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ
                    </a>
                    <a href="{{ url_for('main.stats') }}" class="btn btn-outline-secondary btn-lg">
                        üìà –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                    </a>
                </div>
            </div>
        </div>

        <!-- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è -->
        {% if last_mood and recommendations %}
        <div class="card card-custom mt-4">
            <div class="card-body">
                <h4 class="mb-3">üí° –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h4>
                <p class="text-muted mb-3">
                    –ù–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–µ–≥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è:
                    {% if last_mood.mood == 'happy' %}üòä –°—á–∞—Å—Ç–ª–∏–≤
                    {% elif last_mood.mood == 'calm' %}üòå –°–ø–æ–∫–æ–µ–Ω
                    {% elif last_mood.mood == 'neutral' %}üòê –ù–µ–π—Ç—Ä–∞–ª–µ–Ω
                    {% elif last_mood.mood == 'sad' %}üòî –ì—Ä—É—Å—Ç–µ–Ω
                    {% elif last_mood.mood == 'angry' %}üò† –°–µ—Ä–¥–∏—Ç
                    {% elif last_mood.mood == 'anxious' %}üò∞ –¢—Ä–µ–≤–æ–∂–µ–Ω
                    {% elif last_mood.mood == 'excited' %}üéâ –í –≤–æ—Å—Ç–æ—Ä–≥–µ
                    {% elif last_mood.mood == 'tired' %}üò¥ –£—Å—Ç–∞–ª
                    {% else %}{{ last_mood.mood }}{% endif %}
                </p>

                <div class="row">
                    {% for advice in recommendations %}
                    <div class="col-md-6 mb-2">
                        <div class="card bg-light">
                            <div class="card-body py-2">
                                <div class="d-flex align-items-center">
                                    <div class="me-3">‚úÖ</div>
                                    <div>{{ advice }}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>

                <div class="text-center mt-3">
                    <a href="{{ url_for('main.recommendations_page') }}" class="btn btn-outline-primary btn-sm">
                        –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
                    </a>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è -->
        <div class="card card-custom mt-4">
            <div class="card-body">
                <h4 class="mb-3">üìã –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏</h4>
                {% if recent_moods %}
                    <div class="list-group">
                        {% for mood in recent_moods %}
                        <div class="list-group-item">
                            <div class="d-flex w-100 justify-content-between">
                                <h6 class="mb-1">
                                    {% if mood.mood == 'happy' %}üòä –°—á–∞—Å—Ç–ª–∏–≤
                                    {% elif mood.mood == 'calm' %}üòå –°–ø–æ–∫–æ–µ–Ω
                                    {% elif mood.mood == 'neutral' %}üòê –ù–µ–π—Ç—Ä–∞–ª–µ–Ω
                                    {% elif mood.mood == 'sad' %}üòî –ì—Ä—É—Å—Ç–µ–Ω
                                    {% elif mood.mood == 'angry' %}üò† –°–µ—Ä–¥–∏—Ç
                                    {% elif mood.mood == 'anxious' %}üò∞ –¢—Ä–µ–≤–æ–∂–µ–Ω
                                    {% elif mood.mood == 'excited' %}üéâ –í –≤–æ—Å—Ç–æ—Ä–≥–µ
                                    {% elif mood.mood == 'tired' %}üò¥ –£—Å—Ç–∞–ª
                                    {% else %}{{ mood.mood }}{% endif %}
                                </h6>
                                <small class="text-muted">{{ mood.timestamp.strftime('%d.%m.%Y %H:%M') }}</small>
                            </div>
                            {% if mood.notes %}
                            <p class="mb-1">{{ mood.notes }}</p>
                            {% endif %}
                        </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <p class="text-muted">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è.</p>
                    <a href="{{ url_for('main.mood_form') }}" class="btn btn-custom">–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é –∑–∞–ø–∏—Å—å</a>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card card-custom">
            <div class="card-body text-center">
                <h5>üìä –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø</h5>
                <div class="d-grid gap-2">
                    <a href="{{ url_for('main.stats') }}" class="btn btn-custom">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è</a>
                    <a href="{{ url_for('main.mood_form') }}" class="btn btn-outline-secondary">–ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å</a>
                    <a href="{{ url_for('main.recommendations_page') }}" class="btn btn-outline-primary">–í—Å–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</a>
                </div>
            </div>
        </div>
        
        <div class="card card-custom mt-4">
            <div class="card-body text-center">
                <h5>üë§ –ü—Ä–æ—Ñ–∏–ª—å</h5>
                <p><strong>{{ current_user.username }}</strong></p>
                <p class="text-muted">{{ current_user.email }}</p>
                <a href="{{ url_for('main.profile') }}" class="btn btn-outline-secondary btn-sm">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</a>
                <a href="{{ url_for('main.logout') }}" class="btn btn-outline-danger btn-sm mt-2">–í—ã–π—Ç–∏</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}